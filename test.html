<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Torrent Requests</title>
    <style>
        /* CSS for styling */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0; /* Light gray background */
            color: #333; /* Blackish text color */
        }
        .title-bar {
            background-color: #333; /* Dark blue title bar */
            color: #fff; /* White text color */
            text-align: center;
            padding: 10px 0;
            font-size: 35px;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff; /* White container background */
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .link-item {
            padding: 10px;
            background-color: #f0f0f0; /* Light gray link item background */
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .comments-section {
            margin-top: 10px;
        }
        .comment {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 5px;
            margin-bottom: 5px;
        }
        .comment input[type="text"] {
            width: 80%;
            padding: 5px;
            margin-bottom: 5px;
        }
        .comment-btn {
            padding: 5px 10px;
            cursor: pointer;
        }
        .comment-btn:hover {
            background-color: #007bff;
            color: #fff;
        }
        .search-container {
            float: right;
        }
        .search-container input[type="text"] {
            padding: 5px;
            margin-top: 5px;
        }
        .filter-container {
            float: left;
        }
        .filter-container select {
            padding: 5px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="title-bar">Common Website</div>
    <div class="container">
        <h2>Submitted Links</h2>
        <div class="filter-container">
            <label for="filter">Filter by:</label>
            <select id="filter">
                <option value="all">All</option>
                <option value="likes">Likes</option>
                <option value="dislikes">Dislikes</option>
            </select>
        </div>
        <div class="search-container">
            <input type="text" id="search" placeholder="Search...">
        </div>
        <div id="submitted-links"></div>
    </div>
    <footer class="footer" style="background-color: #333; color: #fff; text-align: center; padding: 10px;">
        &copy; 2024 Common Website
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>

    <script>
        // Initialize Firebase
        var firebaseConfig = {
            apiKey: "AIzaSyDRDPueFbHs8rrZDuq3kCjSevukjRZztro",
             authDomain: "commonwebsite-5e316.firebaseapp.com",
             databaseURL: "https://commonwebsite-5e316-default-rtdb.asia-southeast1.firebasedatabase.app",
             projectId: "commonwebsite-5e316",
             storageBucket: "commonwebsite-5e316.appspot.com",
             messagingSenderId: "138538311145",
             appId: "1:138538311145:web:34d891df8ed4ce16dbbf78"
        };
        firebase.initializeApp(firebaseConfig);

        var database = firebase.database();

        // Function to display submitted links
        function displaySubmittedLinks() {
            database.ref('submitted_links').on('child_added', function(snapshot) {
                var linkData = snapshot.val();

                var linkItem = document.createElement('div');
                linkItem.classList.add('link-item');
                linkItem.innerHTML = '<strong>Title:</strong> ' + linkData.title + '<br><strong>Description:</strong> ' + linkData.description + '<br><strong>Link:</strong> <a href="' + linkData.link + '" onclick="copyLink(\'' + linkData.link + '\'); return false;">Right click to copy</a>' +
                                     '<div class="comments-section">' +
                                     '<input type="text" id="comment-' + snapshot.key + '" placeholder="Enter your comment (max 15 words)">' +
                                     '<button class="comment-btn" onclick="postComment(\'' + snapshot.key + '\')">Post Comment</button>' +
                                     '</div>';

                document.getElementById('submitted-links').appendChild(linkItem);
            });
        }

        // Function to handle copying the link
        function copyLink(link) {
            // Copy the link to the clipboard
            navigator.clipboard.writeText(link)
                .then(function() {
                    alert('Link copied to clipboard!');
                })
                .catch(function(error) {
                    console.error('Error copying link:', error);
                });
        }

        // Function to handle posting comments
        function postComment(linkKey) {
            var commentInput = document.getElementById('comment-' + linkKey);
            var commentText = commentInput.value.trim();
            if (commentText !== '') {
                // Record user's IP address
                var userIP = 'User IP: ' + 'user_ip_address_here';
                // Save the comment to Firebase
                var commentsRef = database.ref('submitted_links/' + linkKey + '/comments');
                commentsRef.push({
                    comment: commentText,
                    ip_address: userIP
                });
                // Clear comment input
                commentInput.value = '';
                alert('Your comment has been posted. Your IP address is being recorded.');
            } else {
                alert('Please enter a comment.');
            }
        }

        // Call the function to display submitted links
        displaySubmittedLinks();
    </script>
</body>
</html>
